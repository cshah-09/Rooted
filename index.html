<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rooted</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=DM+Sans:wght@400;500&family=Caveat:wght@600&display=swap" rel="stylesheet">

<style>
body{
    margin:0;
    height:100vh;
    font-family:'DM Sans',sans-serif;
    background:
      radial-gradient(circle at 20% 20%, #fce7f3 0%, transparent 40%),
      radial-gradient(circle at 80% 80%, #ede9fe 0%, transparent 40%),
      #faf7f2;
    display:flex;
    flex-direction:column;
    overflow:hidden;
    position:relative;
}

/* PARTICLES */
.particles{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    overflow:hidden;
    z-index:0;
}

.particles span{
    position:absolute;
    width:4px;
    height:4px;
    background:rgba(255,255,255,0.5);
    border-radius:50%;
    animation: float linear infinite;
}

@keyframes float{
    from{
        transform:translateY(100vh) translateX(0);
        opacity:0;
    }
    10%{ opacity:0.7; }
    90%{ opacity:0.7; }
    to{
        transform:translateY(-10vh) translateX(40px);
        opacity:0;
    }
}

/* HEADER */
header{
    text-align:center;
    padding-top:15px;
    z-index:2;
}

h1{
    font-family:'Playfair Display',serif;
    font-size:2.4rem;
    margin:0;
    color:#2e2e2e;
}

/* MAIN CONTENT */
.main{
    text-align:center;
    margin-top:40px;
    z-index:2;
}

#task{
    font-family:'Caveat',cursive;
    font-size:2.5rem;
    color:#333;
    max-width:460px;
    margin:50px auto 30px auto;
    line-height:1.3;
    text-shadow:0 1px 0 #ffffff;
}

button{
    padding:16px 36px;
    border:none;
    border-radius:35px;
    font-family:'Caveat',cursive;
    font-size:1.6rem;
    background:#ffffffcc;
    backdrop-filter:blur(6px);
    cursor:pointer;
    transition:all 0.3s ease;
}

button:hover{
    transform:translateY(-3px);
    background:#ffffff;
}

#message{
    margin-top:15px;
    font-size:1rem;
    color:#666;
}

/* SOIL SECTION */
.soil-section{
    position:absolute;
    bottom:0;
    width:100%;
    height:22%;
    background:linear-gradient(to top,#8b5e3c,#a97452);
    display:flex;
    justify-content:center;
    align-items:flex-start;
    z-index:1;
}

#plant{
    margin-top:-120px;
}

/* COUNTER */
#counter{
    position:absolute;
    top:20px;
    right:25px;
    font-size:0.9rem;
    color:#444;
    z-index:2;
}
</style>
</head>

<body>

<div class="particles"></div>

<div id="counter"></div>

<header>
<h1>Rooted</h1>
</header>

<div class="main">
<div id="task"></div>
<button id="completeBtn" onclick="completeTask()">Task Completed!!</button>
<div id="message"></div>
</div>

<div class="soil-section">
<div id="plant"></div>
</div>

<script>
const tasks=[
"Drink 6 glasses of water today.",
"Declutter one small space.",
"Go for a 15 min walk.",
"No scrolling 30 mins before bed.",
"Eat one clean meal.",
"Text someone you appreciate.",
"Plan tomorrow in 3 bullet points."
];

const now=new Date();
const pst=new Date(now.toLocaleString("en-US",{timeZone:"America/Los_Angeles"}));
const todayKey=pst.toDateString();

let data=JSON.parse(localStorage.getItem("rooted"))||{
weekStart:todayKey,
completedDays:[],
trees:0
};

function isNewWeek(){
const start=new Date(data.weekStart);
const diff=Math.floor((pst-start)/(1000*60*60*24));
return diff>=7;
}

function resetWeekIfNeeded(){
if(isNewWeek()){
if(data.completedDays.length===7){
data.trees+=1;
}
data.weekStart=todayKey;
data.completedDays=[];
document.getElementById("message").innerText="New week. New growth.";
}
}

resetWeekIfNeeded();

const dayIndex=Math.floor((pst-new Date(data.weekStart))/(1000*60*60*24));
document.getElementById("task").innerText=tasks[dayIndex]||"Come back tomorrow ðŸŒ¿";

function completeTask(){
if(data.completedDays.includes(todayKey)){
document.getElementById("message").innerText="heyy, only one task a day ðŸŒ¿";
return;
}

data.completedDays.push(todayKey);
localStorage.setItem("rooted",JSON.stringify(data));

renderPlant();
document.getElementById("message").innerText="Proud of you ðŸŒ±";
document.getElementById("completeBtn").style.display="none";
}

function renderPlant(){
const stage=data.completedDays.length;
const plant=document.getElementById("plant");
const canopySize=40+stage*10;

plant.innerHTML=`
<svg width="300" height="300">
<rect x="142" y="120" width="16" height="100" rx="5" fill="#7a4f2f"/>
<circle cx="150" cy="110" r="${canopySize}" fill="#b8e6c1"/>
<circle cx="120" cy="115" r="${canopySize*0.75}" fill="#c9f0d2"/>
<circle cx="180" cy="115" r="${canopySize*0.75}" fill="#c9f0d2"/>
<circle cx="150" cy="80" r="${canopySize*0.7}" fill="#d7f7df"/>
</svg>
`;
}

renderPlant();

document.getElementById("counter").innerText="Total Trees Planted â†’ "+data.trees;

if(data.completedDays.includes(todayKey)){
document.getElementById("message").innerText="heyy, only one task a day ðŸŒ¿";
document.getElementById("completeBtn").style.display="none";
}

/* CREATE PARTICLES */
const particleContainer=document.querySelector(".particles");
for(let i=0;i<22;i++){
const dot=document.createElement("span");
dot.style.left=Math.random()*100+"vw";
dot.style.animationDuration=(16+Math.random()*8)+"s";
dot.style.animationDelay=Math.random()*10+"s";
particleContainer.appendChild(dot);
}
</script>

</body>
</html>
